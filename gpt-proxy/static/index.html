<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>IA - Hello World</title>
  <style>
    body { margin:0; height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center; background:#fff; font-family:Arial, Helvetica, sans-serif; }
    h1 { color:red; font-size:36px; }
    .container { display:flex; flex-direction:column; align-items:center; gap:10px; width:90%; max-width:700px; }
    input[type="text"] { width:100%; padding:10px; border:1px solid #ccc; border-radius:6px; font-size:16px; }
    button { padding:10px 18px; font-size:16px; background:#007bff; color:#fff; border:none; border-radius:6px; cursor:pointer; }
    button:hover { background:#0056b3; }
    .result { width:100%; margin-top:10px; padding:12px; border:1px solid #ccc; border-radius:6px; min-height:120px; background:#f8f8f8; white-space:pre-wrap; }
  </style>
</head>
<body>
  <div class="container">
    <h1>IA - Hello World</h1>
    <input type="text" id="userInput" placeholder="Escribe algo..." />
    <button onclick="submitText()">Enviar</button>
    <div class="result" id="resultContainer"></div>
  </div>

  <script>
    async function submitText() {
      const inputText = document.getElementById("userInput").value.trim();
      if (!inputText) { alert("Por favor, ingresa algÃºn texto."); return; }

      const out = document.getElementById("resultContainer");
      out.textContent = "Procesando...";

      try {
        const r = await fetch("/infer", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ text: inputText })
        });

        const data = await r.json().catch(() => ({}));
        if (!r.ok) throw new Error(data.detail || "Error al procesar el texto");

        out.textContent = data.output ?? "(sin output)";
      } catch (e) {
        out.textContent = "Error: " + e.message;
      }
    }
  </script>
</body>
</html>
